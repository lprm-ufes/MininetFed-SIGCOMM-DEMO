# Default Server

## Changing between Client Selection Functions

In the server provided with MiniNetFED, one of the functions is to change between example client selection functions or implement new ones.

All client selection functions are encapsulated in a Class.

To change between client selection functions, access the following file:

```
./server/clientSelection/__init__.py
```

Edit the name of the file from which you want to import the function and the class implemented.

Example:

```python
from .fed_sec_per import FedSecPer as ClientSelection
```

**Important Notes:** Do not change **as ClientSelection**. It ensures that, for any selected function, other server components will recognize it correctly.

Also note that, as demonstrated, new functions must be encapsulated in a Class and contained in the /server/clientSelection directory.

## Implementing New Client Selection Functions

To implement a new aggregation function, you must create a new file in the clientSelection directory with the desired name. Then, create a class following this pattern:

```python
class ClientFunctionName:
    def __init__(self):
      '''
      Definition of constants as needed
      '''

    def select_trainers_for_round(self, trainer_list, metrics):
      '''
      Function implementation
      '''
      return selected_list


```

The received _trainer_list_ parameter is the list of all available clients to be selected for the next round. _metrics_ is a dictionary of dictionaries generated by the _all_metrics_ method implemented in Trainer. The elements of this dictionary can be consulted using the client IDs in _trainer_list_. _selected_list_ is the list of IDs of the selected Trainers.

The examples provided with MiniNetFED illustrate how to implement it, and they can be used as a base for new construction.

## Changing between Aggregation Functions

It's also possible in the server provided with MiniNetFED to select between example aggregation functions or implement new ones.

All aggregation functions are encapsulated in a Class.

To change between client selection functions, access the following file:

```
./server/aggregator/__init__.py
```

Edit the name of the file from which you want to import the function and the class implemented.

Example:

```python
from .fed_avg import FedAvg as Aggregator
```

**Important Notes:** Do not change **as Aggregator**. It ensures that, for any selected function, other server components will recognize it correctly.

Also note that, as demonstrated, new functions must be encapsulated in a Class and contained in the /server/aggregator directory.

## Implementing New Aggregation Functions

To implement a new aggregation function, you must create a new file in the aggregator directory with the desired name. Then, create a class following this pattern:

```python
class AggregatorName:

    def __init__(self):
      '''
      Initialization of constants if needed
      '''

    def aggregate(self, all_trainer_samples, all_weights):
        '''
        Aggregation function
        '''

        return agg_weights
```

The received _all_trainer_sample_ parameter is an array of dictionaries generated by the _all_metrics_ method implemented in Trainer. The elements of this array are disposed in the same order as the weights of each client in the array _all_weights_.

The examples provided with MiniNetFED illustrate how to implement it, and they can be used as a base for new construction.